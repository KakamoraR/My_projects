import string
import random
import clipboard
import os

alfanumerico = [i for i in range(0,10)] + list(string.ascii_uppercase)

def limpar():
    if os.name == 'nt':
        os.system('cls')
    else:
        os.system('clear')

def validarCNPJ(cnpj):
    cnpj = cnpj[:12]
    validar = False
    
    for i in range(0,2):
        valoresTeste = []
        if validar:
            cnpjContrario = cnpj[13::-1]
        else:
            cnpjContrario = cnpj[12::-1]

        for digito in cnpjContrario:
            if digito.isalpha():
                valoresTeste.append(alfanumerico.index(digito) + 7)
            else:
                valoresTeste.append(int(digito))

        contagem = 2
        calculo = []

        for j in valoresTeste:
            calculo.append(contagem * j)
            if contagem == 9:
                contagem = 2
                continue
            else:
                contagem += 1
        calculo = 11 - (sum(calculo) % 11) if sum(calculo) % 11 < 2 else 0

        cnpj += str(calculo)

        validar = True
    
    return cnpj

def gerarCNPJ():
    aleatorio = ''

    for i in range(0,12):
        aleatorio += str(random.choice(alfanumerico))

    return validarCNPJ(aleatorio)

limpar()
while True:
    escolha = input('O que deseja fazer? \n1) Gerar CNPJ \t2) Validar CNPJ\n')

    if not escolha in '12':
        continue

    if escolha == '1':
        cnpj = gerarCNPJ()
        clipboard.copy(cnpj)
        limpar()
        print(cnpj, '\n(CNPJ copiado automaticamente)')
    elif escolha == '2':
        limpar()
        cnpjPessoa = input('Digite o CNPJ para a validação: ').upper().replace('-', '').replace('/', '').replace('.', '')

        if validarCNPJ(cnpjPessoa) == cnpjPessoa:
            print('CNPJ válido')
        else:
            print('CNPJ inválido')
